<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Commission Menu under Sales -->
    <menuitem id="menu_commission_root" 
              name="Commissions" 
              parent="sale.sale_menu_root"
              sequence="40"/>

     <!-- Commission Plans Menu -->
    <record id="action_commission_plan" model="ir.actions.act_window">
        <field name="name">Commission Plans</field>
        <field name="res_model">commission.plan</field>
        <field name="view_mode">list,form</field>
    </record>
    
    <menuitem id="menu_commission_plan" 
              name="Commission Plans" 
              parent="menu_commission_root"
              action="action_commission_plan"
              sequence="10"/>
    
    <!-- My Commission Menu (for Salesperson) -->
    <record id="action_my_commission" model="ir.actions.act_window">
        <field name="name">My Commissions</field>
        <field name="res_model">commission.tracking</field>
        <field name="view_mode">list,form,pivot,graph</field>
        <field name="domain">[('salesperson_id', '=', uid),('invoice_payment_state','=','paid')]</field>
        <field name="context">{'search_default_group_type': 1}</field>
    </record>
    
    <menuitem id="menu_my_commission" 
              name="My Commissions" 
              parent="menu_commission_root"
              action="action_my_commission"
              sequence="20"
              groups="ox_sales_commission.group_commission_sale_user"/>
    
    <!-- Commission Menu (Admin Only) -->
    <record id="action_all_commission" model="ir.actions.act_window">
        <field name="name">All Commissions</field>
        <field name="res_model">commission.tracking</field>
        <field name="view_mode">list,form,pivot,graph</field>
        <field name="domain">[('invoice_payment_state','=','paid')]</field>
        <field name="context">{'search_default_group_salesperson': 1}</field>
    </record>
    
    <menuitem id="menu_all_commission" 
              name="All Commissions" 
              parent="menu_commission_root"
              action="action_all_commission"
              sequence="25"
              groups="ox_sales_commission.group_commission_sale_admin"/>
    
   
    
    <!-- Configuration Menu -->
    <menuitem id="menu_commission_config" 
              name="Configuration" 
              parent="menu_commission_root"
              sequence="100"
              groups="ox_sales_commission.group_commission_sale_admin"/>
</odoo>