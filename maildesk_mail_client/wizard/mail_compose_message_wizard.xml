<?xml version="1.0" encoding="utf-8" ?>
<!--
# Copyright (C) 2025 Metzler IT GmbH
# License Odoo Proprietary License v1.0 (OPL-1)
# You may use this file only in accordance with the license terms.
# For more information, visit: https://www.odoo.com/documentation/18.0/legal/licenses/licenses.html#odoo-proprietary-license
-->
<odoo>
  <record model="ir.ui.view" id="email_compose_message_wizard_inherit_form">
    <field name="name">mail.compose.message.form.inherit</field>
    <field name="model">mail.compose.message</field>
    <field name="inherit_id" ref="mail.email_compose_message_wizard_form" />
    <field name="arch" type="xml">
      <xpath expr="//field[@name='email_from']" position="before">
        <field
          name="custom_from_name"
          invisible="composition_mode not in ['comment', 'email_outgoing'] or subtype_is_log == True"
          groups="maildesk_mail_client.group_mailbox_user,maildesk_mail_client.group_mailbox_admin"
        />
        <field
            name="account_id"
            domain="[('access_user_ids', 'in', [uid])]"
            options="{'no_create': True, 'no_open': True}"
            invisible="composition_mode not in ['comment', 'email_outgoing'] or subtype_is_log == True"
            groups="maildesk_mail_client.group_mailbox_user,maildesk_mail_client.group_mailbox_admin"
        />
      </xpath>
      <xpath expr="//field[@name='partner_ids']/.." position="after">
        <field
          name="partner_cc_ids"
          widget="many2many_tags_email"
          context="{'force_email':True, 'show_email':True}"
          invisible="composition_mode not in ['comment', 'email_outgoing'] or subtype_is_log == True"
        />
        <field
          name="partner_bcc_ids"
          widget="many2many_tags_email"
          context="{'force_email':True, 'show_email':True}"
          invisible="composition_mode not in ['comment', 'email_outgoing'] or subtype_is_log == True"
          readonly="0"
        />
      </xpath>
    </field>
  </record>
</odoo>
