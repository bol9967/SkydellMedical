<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--    Tracking template-->
    <template id="trackingTemplate">
        <t t-call="website.layout">
            <div class="TrackingTemplates">
                <!-- Back Arrow Button (hidden initially, shown when results are displayed) -->
                <div id="backToSearchBtn" class="tracking-back-btn" style="display: none;">
                    <a href="#" class="btn btn-link">
                        <i class="fa fa-arrow-left"></i> Back to Search
                    </a>
                </div>
                
                <!-- Search Form Container -->
                <div id="searchFormContainer" class="container mt-3">
                    <div class="row mb-5">
                        <div class="col-lg-8 mx-auto">
                            <div class="bg-white p-5 rounded shadow">
                                <form id="deliveryTrackingForm" action="">
                                    <h5 class="text-center mt-2 mb-4 ">
                                        Track Your Orders
                                    </h5>
                                    <div class="mb-3">
                                        <label class="form-label">Search By:</label>
                                        <select id="searchType" class="form-select">
                                            <option value="tracking">Tracking Number</option>
                                            <option value="order">Order Number</option>
                                            <option value="picking">Delivery Number</option>
                                        </select>
                                    </div>
                                    <div class="input-group mb-4 border rounded-pill p-1">
                                        <input type="text"
                                               placeholder="Enter Tracking Number"
                                               aria-describedby="trackingInputBtn"
                                               class="form-control bg-none border-0"
                                               autocomplete="off"
                                               id="trackingNumberInput"
                                               required="1"/>
                                        <div class="input-group-append border-0">
                                            <button id="trackingInputBtn"
                                                    class="btn btn-link">
                                                <i class="fa fa-search"/>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                <!-- Button trigger modal -->
                                <!-- <a type="button" class="btn btn-link"
                                   data-bs-toggle="modal"
                                   data-bs-target="#staticBackdrop"
                                   data-toggle="tooltip"
                                   data-placement="bottom"
                                   title="Edit delivery status using access key">
                                    Delivery Partner?
                                </a> -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal -->
                <div class="modal fade" id="staticBackdrop"
                     data-bs-backdrop="static" data-bs-keyboard="false"
                     tabindex="-1" aria-labelledby="staticBackdropLabel">
                    <div class="modal-dialog">
                        <form id="editTrackingStatusForm">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5"
                                        id="staticBackdropLabel">Provide Access
                                        Key
                                    </h1>
                                    <button type="button" class="btn-close"
                                            aria-label="Close" data-bs-dismiss="modal"/>
                                </div>
                                <div class="modal-body m-3">
                                    <div class="form-group row mb-3">
                                        <label for="trackingNumber"
                                               class="col-sm-2 col-form-label">
                                            Track Ref
                                        </label>
                                        <div class="col-sm-9">
                                            <input type="text"
                                                   class="form-control"
                                                   id="trackingNumber"
                                                   placeholder="Tracking Reference"/>
                                        </div>
                                    </div>
                                    <div class="form-group row row mb-3">
                                        <label for="apiKey"
                                               class="col-sm-2 col-form-label">
                                            API key
                                        </label>
                                        <div class="col-sm-9">
                                            <input type="text"
                                                   class="form-control"
                                                   id="apiKey"
                                                   placeholder="API Key"/>
                                        </div>
                                    </div>
                                    <div class="form-group row row mb-3">
                                        <label for="trackingStatus"
                                               class="col-sm-2 col-form-label">
                                            Status
                                        </label>
                                        <div class="col-sm-9">
                                            <input type="text"
                                                   class="form-control"
                                                   id="trackingStatus"
                                                   placeholder="Tracking Status"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button"
                                            class="btn btn-secondary"
                                            data-bs-dismiss="modal"
                                            >
                                        Close
                                    </button>
                                    <button id="TrackingUpdate"
                                            class="btn btn-primary">
                                        Submit
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!--                Failed Modal-->
                <div class="modal fade" id="failedApiKey"
                     data-bs-backdrop="static" data-bs-keyboard="false"
                     tabindex="-1" aria-labelledby="FailedApiKeyLabel">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5"
                                    id="FailedApiKeyLabel">ERROR
                                </h1>
                                <button type="button" class="btn-close"
                                        data-bs-dismiss="modal"
                                        aria-label="Close"/>
                            </div>
                            <div class="modal-body m-3">
                                <h4 class="text-danger">Please provide correct
                                    API key and Tracking Reference.
                                </h4>
                            </div>
                            <div class="modal-footer">
                                <button type="button"
                                        class="btn btn-secondary"
                                        data-bs-dismiss="modal">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!--         Success Modal-->
                <div class="modal fade" id="successApiKey"
                     data-bs-backdrop="static" data-bs-keyboard="false"
                     tabindex="-1" aria-labelledby="successApiKeyLabel">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5"
                                    id="successApiKeyLabel">SUCCESS
                                </h1>
                                <button type="button" class="btn-close"
                                        data-bs-dismiss="modal"
                                        aria-label="Close"/>
                            </div>
                            <div class="modal-body m-3">
                                <h4 class="text-success">Successfully updated
                                    the Delivery Status
                                </h4>
                            </div>
                            <div class="modal-footer">
                                <button type="button"
                                        class="btn btn-secondary"
                                        data-bs-dismiss="modal">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!--         No Records Modal-->
                <div class="modal fade" id="NoRecordsApiKey"
                     data-bs-backdrop="static" data-bs-keyboard="false"
                     tabindex="-1" aria-labelledby="RecordApiKeyLabel">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5"
                                    id="RecordApiKeyLabel">NO RECORDS
                                </h1>
                                <button type="button" class="btn-close"
                                        data-bs-dismiss="modal"
                                        aria-label="OK"/>
                            </div>
                            <div class="modal-body m-3">
                                <h4 class="text-danger">There are no records with
                                    this Tracking Reference.
                                </h4>
                            </div>
                            <div class="modal-footer">
                                <button type="button"
                                        class="btn btn-secondary"
                                        data-bs-dismiss="modal">
                                    Ok
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tracking Results - Two Column Layout (70% table, 30% timeline) -->
                <div class="container-fluid py-5">
                    <div class="row">
                        <!-- Left Column: Tracking Details Table (70%) -->
                        <div class="col-lg-8" id="trackedTableDetails">
                        </div>
                        <!-- Right Column: Timeline (30%) -->
                        <div class="col-lg-4" id="trackedTimelineDetails">
                        </div>
                    </div>
                </div>
                <div id="noRecordsMsg"
                     class="container py-5 text-center"/>
                
                <!-- Travel History Modal -->
                <div class="modal fade" id="travelHistoryModal" tabindex="-1" aria-labelledby="travelHistoryModalLabel">
                    <div class="modal-dialog modal-lg modal-fullscreen-lg-down">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="d-flex align-items-center w-100">
                                    <button type="button" id="travelHistoryBackBtn" class="btn btn-link p-0 me-3" style="color: var(--o-color-1, #017e84);">
                                        <i class="fa fa-arrow-left"></i>
                                    </button>
                                    <div class="flex-grow-1">
                                        <h5 class="modal-title" id="travelHistoryModalLabel">Tracking ID: <span id="travelHistoryTrackingId"></span></h5>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-sm btn-link p-0" style="color: var(--o-color-1, #017e84);">
                                            <i class="fa fa-copy"></i>
                                        </button>
                                        <button type="button" class="btn btn-sm btn-link p-0" style="color: var(--o-color-1, #017e84);">
                                            <i class="fa fa-share"></i>
                                        </button>
                                    </div>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                            </div>
                            <div class="modal-body">
                                <!-- Travel history content will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>
